

# IDTF-MES 整合實施指南與最佳實踐

**作者**: 林志錚 Michael Lin(Chih Cheng Lin)(Chih Cheng Lin) Michael Lin(Chih Cheng Lin)  
**日期**: 2025年10月14日  
**版本**: 1.0

---

## 1. 簡介

本指南旨在為 IDTF 與 MES 的整合專案提供詳細的實施步驟和最佳實踐,以確保專案的順利進行和成功交付。

## 2. 實施步驟

### 階段一: 準備與規劃 (1-2週)

1. **成立專案團隊**: 包括來自 IT、OT、生產和維護部門的代表。
2. **定義整合範圍**: 明確需要整合的數據點、業務流程和應用場景。
3. **選擇 MES Connector**: 根據現有的 MES 系統,選擇或開發合適的 Connector。
4. **設計數據模型**: 擴展 IADL,增加 `production` 相關的屬性。
5. **規劃基礎設施**: 準備 Message Queue 和資料庫等基礎設施。

### 階段二: 單向整合 (IDTF → MES) (1-2個月)

1. **開發 NDH API**: 確保 API 的穩定性和性能。
2. **開發 MES Provider**: 在 MES 中開發服務,定期從 NDH API 獲取數據。
3. **測試與驗證**: 驗證設備狀態和製程參數是否能正確地顯示在 MES 中。

### 階段三: 雙向整合 (非同步) (2-3個月)

1. **部署 Message Queue**: 安裝和配置 RabbitMQ 或 Kafka。
2. **開發 MES Connector**: 實現對 `idtf.equipment.status` 的訂閱和對 `mes.*` 主題的發布。
3. **擴展 Asset Tag Instance**: 增加對 `mes.*` 主題的訂閱和處理邏輯。
4. **端到端測試**: 模擬工單的創建、執行和完成,驗證數據是否在兩個系統之間正確同步。

### 階段四: 數位分身整合 (3-4個月)

1. **開發 Omniverse 應用**: 使用 Omniverse Kit 和 Python 開發數位分身應用。
2. **整合 NDH API**: 在應用中呼叫 NDH API,獲取資產的 3D 模型、即時數據和 MES 資訊。
3. **開發 UI/UX**: 設計使用者介面,讓使用者可以方便地與數位分身進行互動。
4. **使用者訓練**: 對相關人員進行系統操作訓練。

## 3. 最佳實踐

### 3.1 架構設計

- **優先使用非同步通訊**: 透過 Message Queue 實現系統解耦,提高系統的可靠性和擴展性。
- **設計冪等的 API**: 確保重複呼叫 API 不會產生副作用,這對於處理網路不穩定等問題非常重要。
- **使用標準化的數據模型**: 嚴格遵守 ISA-95 標準,確保數據的一致性和可擴展性。

### 3.2 開發流程

- **採用敏捷開發**: 將專案分解為多個 Sprint,每個 Sprint 交付一部分功能,便於快速迭代和反饋。
- **編寫單元測試和整合測試**: 確保每個組件的品質和整合的穩定性。
- **使用版本控制**: 對 IADL、FDL 和程式碼進行版本控制,方便追蹤變更和協同開發。

### 3.3 部署與維護

- **使用容器化部署**: 將 MES Connector、Asset Tag Instance 等服務容器化 (Docker),方便部署和管理。
- **建立監控和告警機制**: 對整合層的各個組件進行監控,及時發現和處理問題。
- **制定數據備份和恢復計畫**: 確保關鍵數據的安全性。

---

